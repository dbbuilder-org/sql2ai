# Render Blueprint for SQL2.AI
# https://render.com/docs/blueprint-spec

services:
  # Marketing Site (Next.js Static Export)
  - type: static_site
    name: sql2ai-site
    buildCommand: npm install && bash apps/site/scripts/build.sh
    branch: main
    staticPublishPath: dist/apps/site/.next
    envVars:
      - key: NODE_ENV
        value: production
      - key: NODE_OPTIONS
        value: --max-old-space-size=1536
    buildFilter:
      paths:
        - apps/site/**
        - libs/**
        - package.json
        - nx.json
    headers:
      - path: /*
        name: X-Frame-Options
        value: DENY
    routes:
      - type: rewrite
        source: /*
        destination: /index.html
    # Custom domains configured in Render dashboard:
    # - sql2.ai
    # - www.sql2.ai
